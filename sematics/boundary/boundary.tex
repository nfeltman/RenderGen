\documentclass[]{article}

% The following \documentclass options may be useful:

% preprint      Remove this option only once the paper is in final form.
% 10pt          To set in 10-point type instead of 9-point.
% 11pt          To set in 11-point type instead of 9-point.
% authoryear    To obtain author/year citation style instead of numeric.

\usepackage{amsmath}
%\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{stmaryrd}
\usepackage{proof}
\usepackage{mathpartir}
\usepackage{mathabx}
\usepackage{listings}
\usepackage{graphicx}

\title{Boundary Types}
\author{Nico}

\newcommand {\next}{asdlfkj}
\input {../../paper/macros}

\begin{document}
\maketitle

\newcommand {\ktype} {\rm Type}
\newcommand {\ibk} [2] {{#1}~\rotatebox[origin=c]{270}{$\therefore$}~{#2}}
\newcommand {\btcont} [3] {{#1}~\triangleright~[{#2},{#3}]}
\newcommand {\bty} [4] [\Gamma] {{#1}\vdash {#2}\triangleright[{#3},{#4}]}
\newcommand {\btysub} [2] [] {\bty{e_{#1}:{#2}}{\tau_{#1}}{\sigma_{#1}}}

Consider a language with products and functions.  The internal boundary kind is given by:

\begin{mathpar}
\infer {\ibk {\rm int}{\rm Unit}} {\cdot} \and 
\infer {\ibk {\rm bool}{\rm Unit}} {\cdot} \and 
\infer {\ibk {A \times B}{\kappa_A \times \kappa_B}} {\ibk A {\kappa_A} & \ibk B {\kappa_B}} \and 
\infer {\ibk {A \to B}{\kappa_A \to \ktype \times \kappa_B}} {\ibk A {\kappa_A} & \ibk B {\kappa_B}} 
\end{mathpar}

For a statement $e$, the judgment $\btcont {e:A} \tau \sigma$ means that $e$ has the internal boundary type $\tau$ and the external boundary type-constructor $\sigma$.  Invariant: for $\ibk A \kappa$, if $\btcont {e:A} \tau \sigma$ then $\sigma : \kappa$.

\begin{mathpar}
\infer {\bty {i:\rm int}\rmunit {()}} {\cdot} \and
\infer {\bty {b:\rm bool}\rmunit {()}} {\cdot} \and
\infer {\bty {\pause~e:\fut\rm int}{\tau\times{\rm int}} {()}} {\bty {e:\rm int}\tau {()}} \and
\infer {\bty [\Gamma,\btcont {x:A} \rmunit \sigma] {x:A}\rmunit\sigma} {\cdot} \and
\infer 
	{\bty {(e_1,e_2):A\times B} {\tau_1 \times \tau_2} {(\sigma_1, \sigma_2)}} 
	{\btysub [1] A & \btysub [2] B} 
	\\
\infer 
	{\bty {\pio~e:A} \tau {(\pi_1\sigma)}} 
	{\btysub {A\times B}} \and
\infer 
	{\bty {\pit~e:B} \tau {(\pi_2\sigma)}} 
	{\btysub {A\times B}} 
	\\
\infer 
	{\bty {\lam x A e : A \to B} \rmunit {(\lambda \alpha:\kappa.(\tau,\sigma))}} 
	{\ibk A \kappa & \bty [\Gamma, \btcont {x:A} \rmunit \alpha] {e:B} \tau \sigma} 
	\and
\infer 
	{\bty {e_1~e_2 : B}
		{\tau_1 \times \tau_2 \times \pi_1 (\sigma_1~\sigma_2)} 
		{(\pi_2(\sigma_1~\sigma_2))} }
	{\btysub [1] {A \to B} & \btysub [2] A } 
\end{mathpar}

\end{document}
