%!TEX root = ../paper.tex

\begin{figure}
\begin{lstlisting}
datatype tree = Leaf
              | Branch of int * int * tree * tree

\end{lstlisting}
\begin{tabular}{l|l}
\begin{lstlisting}
1`datatype list = Empty 
              | Cons of int * list
fun part (p : int, l : list) = ...`

1`fun qs1 (l : list) : tree =
  case l of
    Empty => Leaf
  | Cons ht => 
      let val (i,le,ri) = part ht in 
      Branch (i,#1 ht,qs1 le,qs1 ri)`

\end{lstlisting}
\hspace{1ex}
&
\hspace{1ex}
\begin{lstlisting}
2`fun qs2 (p : tree, k : int) :int= 
  case p of
    Leaf => 0
  | Branch (i,h,p1,p2) => 
      case compare k i of
        LT => qs2 (p1,k)
      | EQ => h
      | GT => qs2 (p2,k-i-1)`
\end{lstlisting}
\end{tabular}
\caption{Two-pass implementation of quickselect.}
\label{fig:qs-split}
\end{figure}

